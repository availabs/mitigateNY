import React, {useMemo} from "react";
import get from "lodash/get";
import {Link} from "react-router-dom";
import {Table} from "~/modules/avl-components/src";
import { fnum } from "~/utils/macros.jsx";
import {hazardsMeta} from "~/utils/colors.jsx";
import {Attribution} from "../../shared/attribution.jsx";

const colAccessNameMapping = {
    'disaster_number': 'distinct disaster_number as disaster_number',
}

const getNestedValue = (obj) => typeof obj?.value === 'object' ? getNestedValue(obj.value) : obj?.value || obj;

export const RenderSocialVulnerabilitySummaryTable = ({
                                       data=[],
                                       columns=[],
                                       pageSize,
                                       baseUrl,
                                       attributionData,
                                       striped
}) => {

    if(!data?.length || !columns?.length) return null;

    const memoisedData = useMemo(() => data, [data]);
    const memoisedColumns = useMemo(() => columns, [columns]);
    return (
        <>
            <div className={'py-5'}>
                {
                    data?.length > 0 && columns?.length > 0 && (
                        <Table
                            columns={memoisedColumns}
                            data={memoisedData}
                            initialPageSize={5}
                            // pageSize={5}
                            striped={striped}
                        />
                    )
                }
            </div>
            <Attribution baseUrl={baseUrl} attributionData={attributionData} />
        </>
    )
};